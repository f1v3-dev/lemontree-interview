
## 보안 관점 (회원 검증)

TradeController 에서는 회원의 ID를 받아 어떤 회원의 거래 요청인지 식별

하지만, `PaymentController`, `PaybackController` 에서는 요청자가 누군지 파악할 수 없음.

- 요청한 회원의 ID와 거래를 생성한 요청자 ID가 일치하는지 검증해야하는 코드가 필요해보임.
- 다른 유저가 내 거래를 마음대로 결제하고 취소하는 등의 행위를 하는 경우 보안적으로 문제가 있다고 판단됨.


## Locking 

**1. 서비스를 실제로 운영한다 했을 때, 회원의 접근에 락을 거는 행위는 어떤 문제점이 있을까?**

- 모든 영역에서 회원에 대한 정보를 조회를 할 텐데 `Write Lock (X-Lock)`이 걸려 있다면?
- 마이페이지를 눌러도 점유하고 있는 경우에 멈춰야 되는건가?

**2. 거래, 페이백에서 Trade, Member 모두 락을 거는 상황이다.**

- 다른 요청에서 Member에 먼저 락을 걸고, Trade에 락 요청을 할 경우?
- 서로 점유 대기를 진행하게 되어 데드락이 발생할 것으로 보임.



## Connection Pool

DB Lock (Pessimistic Lock) 과 Connection Pool 이 연관관계가 있는가?

- 현재 `거래(Trade)`, `유저(Member)` 에 대해 비관적 락을 통해 DB 측에서 락을 걸고 있음.
- 이러한 상황에서 Connection Pool 을 hikariCP 사용하여 높은 성능을 기대하는건 연관관계가 있는가?

> Lock을 거는 주체가 애플리케이션인 낙관적 락(Optimistic Lock) 일 경우 이점이 있어보이지만,  
> 어떻게 생각을 하냐에 따라 다를 것 같기는 하지만, 낙관적 락으로 인한 성능 하락을 여기서 막는다는 조금 안맞아보임.


## Index

만약에 결제 일자가 2024년 8월 인 것들을 모두 가져온다고 했을 때 성능을 높이는 방법은?
